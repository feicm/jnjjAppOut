$(function(){function e(){var l,o=$("#backpwd_methon").val(),n=$("#email").val(),s=$("#phone").val(),a=$("#mqlxrxm").val(),c=$("#mqlxrdh").val(),g=$("#mqlxrsfzh").val(),v={};switch(i.off("click"),o){case"fromemail":v={email:$("#email")},App.verify(v)?(l={userName:r,email:n,baseDomain:p},t(m,l)):i.on("click",e);break;case"fromphone":v={phone:$("#phone")},App.verify(v)?(l={userName:r,phoneNum:s,baseDomain:p},t(d,l)):i.on("click",e);break;case"fromcloser":v={closername:$("#mqlxrxm"),closerphone:$("#mqlxrdh"),closeridcard:$("#mqlxrsfzh"),baseDomain:p},App.verify(v)?(l={userName:r,closeUserName:a,closePhoneNum:c,closeIdentityId:g},t(u,l)):i.on("click",e);break;default:console.log("这是一个彩蛋，还愣着干嘛，买彩票去啊！！"),i.on("click",e)}}function l(){var e=$("#repwd_old").val(),t=$("#repwd_new").val(),o={};a.off("click"),o={pwdold:$("#repwd_old"),pwdnew1:$("#repwd_new"),pwdnew2:$("#repwd_new2")};var s;e?App.verify(o)?(s={userName:r,oldPass:e,newPass:t,baseDomain:p},n=App.UI("dialog",{msg:"密码修改中，请稍后！"}),App.getAjaxData(c,s,function(e){if("error"===e)return n.remove(),void a.on("click",l);var t=e.passwordRestResponse;console.dir(t),"success"===t.result?(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:t.resultContent+"!"}),a.on("click",l)):"false"===t.result?(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:t.resultContent+"!"}),a.on("click",l)):(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"密码修改失败!"}),a.on("click",l))})):a.on("click",l):(App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"请填写旧密码!"}),a.on("click",l))}function t(l,t){n=App.UI("dialog",{msg:"找回密码中，请稍后！"}),App.getAjaxData(l,t,function(l){if("error"===l)return void i.on("click",e);var t=l.passwordRestResponse;console.dir(t),"true"===t.result?(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:t.resultContent+"!"}),i.on("click",e)):"false"===t.result?(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:t.resultContent+"!"}),i.on("click",e)):(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"找回密码失败!"}),i.on("click",e))})}function o(e,l){return e===l}if(!App.addOnlineStatusListener())return!1;var n,r=App.LS.get("App_userName"),p=App.LS.get("App_baseDomain"),s=$("#backpwd_methon"),i=$("#backpwd_btn"),a=$("#repwd_btn"),c=jnjjApp.config.requestUrl+"/jnpublic/oldPassSetPass.json",m=jnjjApp.config.requestUrl+"/jnpublic/mailSetPass.json",d=jnjjApp.config.requestUrl+"/jnpublic/phoneSetPass.json",u=jnjjApp.config.requestUrl+"/jnpublic/closeSetPass.json";i.length&&i.on("click",e),$("#repwd_new").on("blur",function(){var e=$(this).val(),l=$("#repwd_new2").val();""===l||o(e,l)||App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"两次密码输入不一致!"})}),$("#repwd_new2").on("blur",function(){var e=$(this).val(),l=$("#repwd_new").val();""===l||o(e,l)||App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"两次密码输入不一致!"})}),App.UI("inputClose",{doms:$(".list-block")}),s.length&&i.length&&(s.mobiscroll().select({theme:"ios7",lang:"zh",display:"bottom",mode:"scroller",minWidth:200}),App.UI("toggleSelectBlock",{dom:s}),App.UI("buttonHover",{dom:i,hoverClassName:"ui_btn_01_hover"})),a.length&&App.UI("btnHighlightWithInput",{btn:a,listener:l,inputs:$(".J_btnHighlightWithInput input"),hoverClass:"ui_btn_01_hover",disableClass:"ui_btn_01_disable"})});