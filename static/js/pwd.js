$(function(){function e(){var l,t=$("#backpwd_methon").val(),n=$("#email").val(),p=$("#phone").val(),a=$("#mqlxrxm").val(),c=$("#mqlxrdh").val(),g=$("#mqlxrsfzh").val(),v={};switch(i.off("click"),t){case"fromemail":v={email:$("#email")},App.verify(v)?(l={userName:s,email:n,baseDomain:r},o(m,l)):i.on("click",e);break;case"fromphone":v={phone:$("#phone")},App.verify(v)?(l={userName:s,phoneNum:p,baseDomain:r},o(d,l)):i.on("click",e);break;case"fromcloser":v={closername:$("#mqlxrxm"),closerphone:$("#mqlxrdh"),closeridcard:$("#mqlxrsfzh"),baseDomain:r},App.verify(v)?(l={userName:s,closeUserName:a,closePhoneNum:c,closeIdentityId:g},o(u,l)):i.on("click",e);break;default:console.log("这是一个彩蛋，还愣着干嘛，买彩票去啊！！"),i.on("click",e)}}function l(){var e=$("#repwd_old").val(),o=$("#repwd_new").val(),t={};a.off("click"),t={pwdold:$("#repwd_old"),pwdnew1:$("#repwd_new"),pwdnew2:$("#repwd_new2")};var p;e?App.verify(t)?(p={userName:s,oldPass:e,newPass:o,baseDomain:r},n=App.UI("dialog",{msg:"密码修改中，请稍后！"}),App.getAjaxData(c,p,function(e){if("error"===e)return n.remove(),void a.on("click",l);var o=e.passwordRestResponse;console.dir(o),"success"===o.result?(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:o.resultContent+"!"}),a.on("click",l)):"false"===o.result?(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:o.resultContent+"!"}),a.on("click",l)):(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"密码修改失败!"}),a.on("click",l))})):a.on("click",l):(App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"请填写旧密码!"}),a.on("click",l))}function o(l,o){n=App.UI("dialog",{msg:"找回密码中，请稍后！"}),App.getAjaxData(l,o,function(l){if("error"===l)return void i.on("click",e);var o=l.passwordRestResponse;console.dir(o),"success"===o.result?(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:o.resultContent+"!"}),i.on("click",e)):"false"===o.result?(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:o.resultContent+"!"}),i.on("click",e)):(n.remove(),App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"找回密码失败!"}),i.on("click",e))})}function t(e,l){return e===l}if(!App.addOnlineStatusListener())return!1;var n,s=App.LS.get("App_userName"),r=App.LS.get("App_baseDomain"),p=$("#backpwd_methon"),i=$("#backpwd_btn"),a=$("#repwd_btn"),c=jnjjApp.config.requestUrl+"/jnpublic/oldPassSetPass.json",m=jnjjApp.config.requestUrl+"/jnpublic/mailSetPass.json",d=jnjjApp.config.requestUrl+"/jnpublic/phoneSetPass.json",u=jnjjApp.config.requestUrl+"/jnpublic/closeSetPass.json";i.length&&i.on("click",e),$("#repwd_new").on("blur",function(){var e=$(this).val(),l=$("#repwd_new2").val();""===l||t(e,l)||App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"两次密码输入不一致!"})}),$("#repwd_new2").on("blur",function(){var e=$(this).val(),l=$("#repwd_new").val();""===l||t(e,l)||App.UI("dialog",{type:"alert",title:"公众服务平台",msg:"两次密码输入不一致!"})}),App.UI("inputClose",{doms:$(".list-block")}),p.length&&i.length&&(p.mobiscroll().select({theme:"ios7",lang:"zh",display:"bottom",mode:"scroller",minWidth:200}),App.UI("toggleSelectBlock",{dom:p}),App.UI("buttonHover",{dom:i,hoverClassName:"ui_btn_01_hover"})),a.length&&App.UI("btnHighlightWithInput",{btn:a,listener:l,inputs:$(".J_btnHighlightWithInput input"),hoverClass:"ui_btn_01_hover",disableClass:"ui_btn_01_disable"})});